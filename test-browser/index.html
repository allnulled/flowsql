<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport"
        content="width=device-width, initial-scale=1.0">
    <title>FlowsqlBrowser Test</title>
</head>

<body>
    <script src="qunit.min.js"></script>
    <link rel="stylesheet"
        href="qunit.min.css">
    <script src="sql-wasm.js"></script>
    <script src="flowsql-browser.js"></script>
    <div id="qunit"></div>
    <script>
        QUnit.config.autostart = false;
        window.addEventListener("load", () => {
            const main = async function () {
                try {
                    QUnit.module("Introducción", function() {
                        QUnit.test("Test de acceso a globales", async function (assert) {
                            assert.ok(typeof FlowsqlBrowser === "function", "«FlowsqlBrowser» must be a function");
                        });
                    });
                    window.flowdb = FlowsqlBrowser.create({ trace: true, traceSql: true });
                    QUnit.module("Contratos", function() {
                        QUnit.test("Test de acceso a propiedades y métodos", async function (assert) {
                            assert.ok(typeof flowdb.$database === "object", "«flowsqlBrowser.$database» must be an object");
                        });
                    });
                    await flowdb.connect();
                    console.log("CONNECTED");
                    console.log("CONNECTED");
                    console.log("CONNECTED");
                    console.log("CONNECTED");
                    console.log("CONNECTED");
                    QUnit.module("Estado tras conexión", function() {
                        QUnit.test("Test de acceso a propiedades y métodos", async function (assert) {
                            assert.ok(typeof flowdb.$database === "object", "«flowsqlBrowser.$database» must be an object");
                        });
                    });
                    QUnit.start();
                } catch (error) {
                    console.log(error);
                }
            };
            main();
        })
    </script>
</body>

</html>